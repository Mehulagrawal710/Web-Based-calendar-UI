<!DOCTYPE html>
<html>

<head>
	<title>Calendar</title>
	<meta charset="utf-8">
	<!--Bootstrap-->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<!--AngularJS-->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

<style>

body{background-repeat: no-repeat;
	 background-size: 100% auto;}

#heading{font-size: 80px;
		 width: 300px;
		 margin: 0 auto;
		 color: #000; 
		 font-family: freestyle script;}

#calendar{background-color: rgba(0,0,0,0.5);
		  color: #eee;
		  padding: 20px;
		  border: 5px solid #000;
		  border-radius: 20px;}

.day{border: 0px solid black;
	 border-radius: 10px;
	 padding: 10px;
	 height: 100px;
	 width: 100px;
	 float: left;}

.today{background-color: lightgreen;
	   color: #000;}	  

.day:hover{background-color: powderblue;
		   color: #000;}	  	

.addevent{height: 80%;
		  width: 40%;
		  position: fixed;
		  top: 10%;
		  left: 30%;
		  background-color: rgba(255,255,255,1);}
	
</style>

</head>
<body ng-app="myApp" ng-style="{'background-image': 'url(' + months[current_month].bgimg + ')'}" ng-controller="ctrl">
	
	<div align="center" id="heading">My Calendar</div>
	<div class="container" id="calendar">
		
		<button ng-click="decrement_year()" class="btn btn-sm btn-info"><<</button>
		<span>year</span>
		<button ng-click="increment_year()" class="btn btn-sm btn-info">>></button>
		
		<button ng-click="decrement_month()" class="btn btn-sm btn-info"><<</button>
		<span>month</span>
		<button ng-click="increment_month()" class="btn btn-sm btn-info">>></button>
		<button ng-click="show_all_event_page()" style="float: right;" class="btn btn-md btn-success">all events</button>
		<button ng-click="today()" style="float: right;margin-right: 5px;" class="btn btn-md btn-success">today</button>
		<h2>{{months[current_month].month}}, {{current_year}}</h2>
		<hr>
		<div>
			<div ng-repeat="i in get_days_array(current_month)">
				<div class="day" ng-click="add_event(i)" ng-class="{today: i==current_date && current_month==month && current_year == year}">
					<h3>{{i}}</h3>
					<h4>{{weekdays[weekday(i)]}}</h4>
				</div>
			</div>
		</div>
		

		<div class="addevent" ng-if="open_add_event==1">
			<div class="container">
				<h1>{{add_event_date}}</h1>
				<h2>Add Event</h2>
				<h3>Event Title:</h3>
				<input ng-model="event_title">
				<br>
				<h3>Event Description:</h3>
				<input ng-model="event_description">
				<button ng-click="add_this_event(event_title, event_description)">Add Event</button>
				<button ng-click="close_add_event()">close</button>
			</div>
		</div>

		<div class="addevent" ng-if="show_all_event==1">
			<div class="container">
				<div ng-repeat="event in events">
					<p>{{event.d}} {{months[event.m].month}} {{event.y}} {{event.t}} {{event.desc}}</p>
				</div>
				<button ng-click="close_all_event_page()">close</button>
			</div>
		</div>
	</div>

<script>
var app = angular.module('myApp', []);
app.controller('ctrl', function ($scope) {

	date = new Date();
	$scope.current_date = date.getDate();
	$scope.current_day = date.getDay();
	$scope.month = date.getMonth();
	$scope.year = date.getFullYear();

	$scope.current_year = $scope.year;
	$scope.current_month = $scope.month;
	
	$scope.today = function(){
		$scope.current_date = date.getDate();
		$scope.current_day = date.getDay();
		$scope.month = date.getMonth();
		$scope.current_year = date.getFullYear();

		$scope.current_year = $scope.year;
		$scope.current_month = $scope.month;
	}

	$scope.months = [
    	{month:'January', no_of_days:31, bgimg:"http://apps.rixos.com/Repo/List/2026-20171025-0b8450f4-caae-4bd4-be14-f9c05418f6d0.jpg"},
    	{month:'February', no_of_days:28, bgimg:"https://static1.squarespace.com/static/55b43a79e4b0e6e72561f70a/5b885064562fa784c87cb9ce/5b88508e8a922d156a7bf612/1535660263436/cabin_AL_3.jpg?format=1000w"},
    	{month:'March', no_of_days:31, bgimg:"http://profilepicturesdp.com/wp-content/uploads/2018/06/colours-dp-10.jpg"},
    	{month:'April', no_of_days:30, bgimg:"https://static.vecteezy.com/system/resources/previews/000/117/397/original/free-summer-beach-vector-illustration.jpg"},
    	{month:'May', no_of_days:31, bgimg:"https://static.vecteezy.com/system/resources/previews/000/117/397/original/free-summer-beach-vector-illustration.jpg"},
    	{month:'June', no_of_days:30, bgimg:"https://maxcdn.icons8.com/app/uploads/2018/07/elegant-digital-illustration-1200x794.png"},
    	{month:'July', no_of_days:31, bgimg:"https://maxcdn.icons8.com/app/uploads/2018/07/elegant-digital-illustration-1200x794.png"},
    	{month:'August', no_of_days:31, bgimg:"https://i.pinimg.com/originals/a8/b7/27/a8b72709ef03648d9ad893def67f2473.jpg"},
    	{month:'September', no_of_days:30, bgimg:"https://i.pinimg.com/originals/a8/b7/27/a8b72709ef03648d9ad893def67f2473.jpg"},
    	{month:'October', no_of_days:31, bgimg:"https://www.thisiscolossal.com/wp-content/uploads/2018/06/mercadante-1.jpg"},
    	{month:'November', no_of_days:30, bgimg:"https://blogmedia.evbstatic.com/wp-content/uploads/wpmulti/sites/3/2016/10/19171356/new-years-eve1.jpg"},
    	{month:'December', no_of_days:31, bgimg:"https://www.plannthat.com/wp-content/uploads/2018/10/christmas-marketing-plan.jpeg"}
    ];

    $scope.weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

    $scope.events = [];

    $scope.increment_year = function(){
    	if ($scope.current_year !=3000) {
    			$scope.current_year +=1;
    	}
    }

    $scope.decrement_year = function(){
    	if ($scope.current_year !=1900) {
    			$scope.current_year -=1;
    	}	
    }

    $scope.increment_month = function(){
    	if ($scope.current_month !=11) {
    			$scope.current_month +=1;
    	}
    	else{
    		$scope.current_year +=1;
    		$scope.current_month = 0;
    	}
    }

    $scope.decrement_month = function(){
    	if ($scope.current_month !=0) {
    			$scope.current_month -=1;
    	}
    	else{
    		$scope.current_year -=1;
    		$scope.current_month = 11;
    	}
    }

    $scope.get_days_array = function(n){
    	$scope.days_array = [];
    	for(x=1; x<=$scope.months[n].no_of_days; x++){
    		$scope.days_array.push(x);
    	}
    	return $scope.days_array;
    }
    
    zellers_month = [11,12,1,2,3,4,5,6,7,8,9,10];

    $scope.weekday = function(i){
    	k = i;
    	m = zellers_month[$scope.current_month];
    	d = ($scope.current_year)%100;
    	c = Math.floor(($scope.current_year)/100);

    	f = k + Math.floor((13*m-1)/5) + d + Math.floor(d/4) + Math.floor(c/4) - 2*c;
    	rem = Math.floor(f%7);
    	if(rem<0){index = rem + 7;}
    	else{index = rem;}
    	return index;
    }

    $scope.open_add_event = 0;
    var event_date;
    
    $scope.add_event = function(date){
	    event_date = date;	
    	$scope.open_add_event = 1;
    	$scope.add_event_date = date+", "+$scope.months[$scope.current_month].month+", "+$scope.current_year;
    }
    
    $scope.close_add_event = function(){
    	$scope.open_add_event = 0;	
    }
    
    $scope.add_this_event = function(title, description){
    	$scope.events.push(
    		{
    			d: event_date,
    			m: $scope.current_month,
    			y: $scope.current_year,
    			t: title,
    			desc: description
    		}
    	);
    }

    $scope.show_all_event = 0;

    $scope.show_all_event_page = function(){
    	$scope.show_all_event = 1;
    }

    $scope.close_all_event_page = function(){
    	$scope.show_all_event = 0;
    }

});
</script>

</body>
</html>